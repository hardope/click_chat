{% extends "layout.html" %}

      <meta name="viewport" content="initial-scale=1, width=device-width">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

{% block body %}
<script>
function get_int(input){
    num = ""
    for (let i = 0; i < input.length; i++) {
        if (input[i]== "🖤"){
            break
        } else{
            num += input[i]
        }
    }
    return parseInt(num)
}
function like(input){
    let box = document.getElementById(input)

    if (box.getAttribute('value') == "True") {
       box.innerHTML = (get_int(box.textContent) - 1) + "🖤"
       box.setAttribute('value', "False")
       let url = window.location.origin
       let request = new XMLHttpRequest();
       let body = document.querySelector('#body');
       request.open("GET", url + "/unlike/" + input);
       request.send();

    } else {
       box.setAttribute('value', "True")
       box.innerHTML = (get_int(box.textContent) + 1) + "❤️"
       let url = window.location.origin
       let request = new XMLHttpRequest();
       let body = document.querySelector('#body');
       request.open("GET", url + "/like/" + input);
       request.send();

    }
}
</script>
<style>
    .name_container{
          max-width: 750px;
          width: 100vw;
          border-top: solid;
          border-width: 1px;
     }
     img{
          margin-top: -10px;
          width: 100vw;
          height: auto;
          min-height: 50px;
          max-width: 750px;
     }
     .container{
          max-width: 750px;
          display: flex;
          border-top: solid;
          border-width: 1px;
     }
     html {
          scroll-behavior: smooth;
     }
     .a{
          margin-left: 55px;
     }
     .div{
          display: block;
          width: 100vw;
          height: auto;
          min-height: 50px;
          max-width: 750px;
          padding: 20px 20px 20px 20px;
          text-align: center;
          font-size: 20px;
          word-wrap: break-word;
     }
     .react{
          height: 50px;
          width: 50vw;
          align-self: center;
          max-width: 345px;
          text-align: center;
          display: block;
          border-right: solid;
          border-width: 1px;
          margin-left: 10px;
     }
     .comment{
          height: 50px;
          width: 50vw;
          align-self: center;
          max-width: 345px;
          text-align: center;
          display: block;
     }
</style>
    <center>
        {% if img == 0 %}
            <img src="/static/favicon.ico" style="border-radius: 50%; width:20%;">
        {% else %}
            <a href="/static/{{pic}}"><img src="/static/{{pic}}" style="border-radius: 50%; width:30%;"></a>
        {% endif %}
        {% if data == [] %}
            <h1 style="font-size: 30px !important">{{user}}</h1>
            <p>No Information</p>
        {% else %}
            <h4 style="font-size: 30px !important">{{data[0][0]}}</h4>
            <p>{{data[0][1]}}</p>
            <h4>About {{data[0][0]}}</h4>
            <p>{{data[0][2]}}</p>
        {% endif %}
    </center>

    {% if username == user %}
        <form action="/me/{{user}}">
            <button  type="submit" id='button' class="btn btn-outline-light" data-mdb-ripple-color="dark" style="text-size: 60px; color: black; border: 0ch; margin-bottom: 2%; margin-left: 35%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Edit Profile</button>
        </form>
    {% else %}
        <form action="/chat/{{user}}">
            <button  type="submit" id='button' class="btn btn-outline-light" data-mdb-ripple-color="dark" style="text-size: 60px; color: black; border: 0ch; margin-bottom: 2%; margin-left: 35%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Message</button>
        </form>
    {% endif %}
    {% for i in posts %}
    <div class="name_container">
        <a class="a" href="/profile/{{i[1]}}">{{i[1]}}</a>
    </div>
        <div class="div">
            {{i[2]}}
        </div>
        {% if i[7] == "True" %}
            <a href="/static/{{i[0]}}.jpg">
                <img src="/static/{{i[0]}}.jpg">
            </a>
        {% endif %}
        <div class="container">
             <p class="react" value="{{i[5]}}" id="{{i[0]}}" onclick="like({{i[0]}})">{{i[4]}}</p>
             <a href="/comment/{{i[0]}}"><p class="comment">{{i[6]}} 💬</p></a>
        </div>
    {% endfor %}
{% endblock %}}